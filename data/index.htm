<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <!--
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap-toggle.min.css">
    <link rel="stylesheet" href="css/bootstrap-slider.min.css">
    <link rel="stylesheet" href="css/bootstrap-switch.min.css">
    <link rel="stylesheet" href="css/tether.min.css">
    <link rel="stylesheet" href="css/tether-theme-basic.min.css">
    <link rel="stylesheet" href="css/jquery.terminal-1.7.2.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    -->
    <link rel="stylesheet" href="css/libraries.min.css">
    <link rel="stylesheet" href="main.css">
    <title>NRJMeter</title>
</head>

<body>
    <div class="container">
        <!--  Onglets  -->
        <ul class="nav nav-tabs" id="myTab">
            <li class="nav-item"><a href="#tab_tinfo" class="nav-link" data-toggle="tab"><span class="fa fa-bolt">&nbsp;</span>Electric Meter&nbsp;<span class="badge-pill badge-secondary" id="tcharge" style="font-size:0.75em;color:white"></span></a></li>
            <li class="nav-item"><a href="#tab_sensor" class="nav-link" data-toggle="tab"><span class="fa fa-tint">&nbsp;</span>Sensors&nbsp;<span class="badge-pill badge-secondary" id="scharge" style="font-size:0.75em;color:white"></span></a></li>
            <li class="nav-item"><a href="#tab_sys" class="nav-link" data-toggle="tab"><span class="fa fa-cog">&nbsp;</span>System</a></li>
            <li class="nav-item"><a href="#tab_cfg" class="nav-link" data-toggle="tab"><span class="fa fa-wrench">&nbsp;</span>Configuration</a></li>
            <li class="nav-item"><a href="#tab_fs" class="nav-link" data-toggle="tab"><span class="fa fa-folder-open">&nbsp;</span>Filesystem&nbsp;<span class="badge-pill badge-secondary" id="sspiffs" style="font-size:0.75em;color:white"></span></a></li>
            <li class="nav-item"><a href="#tab_log" class="nav-link" data-toggle="tab"><span class="fa fa-list-alt">&nbsp;</span>Logger</a></li>
            <li class="nav-item"><a href="#tab_edit" class="nav-link" data-toggle="tab"><span class="fa fa-pencil-square-o">&nbsp;</span>Editor</a></li>
            <li class="nav-item"><a href="#tab_term" class="nav-link" data-toggle="tab"><span class="fa fa-terminal">&nbsp;</span>Terminal</a></li>
            <h6><span class="badge badge-pill badge-default" style="margin-top: 13px;margin-left: 13px;" id="connect">...</span></h6>
        </ul>

        <!-- Contenu des onglets -->
        <div class="tab-content">

            <!-- tab teleinfo -->
            <div class="tab-pane fade" id="tab_tinfo">

                <br>

                <div>
                    <span style="float:left;width:18ex;text-align:center;">Instant Energy: </span>
                    <div class="progress">
                        <div class="progress-bar bg-success" role="progressbar" style="width:0" id="pbar">
                            <span id="pcharge">Loading...</span>
                        </div>
                    </div>
                </div>

                <br>

                <div class="row">
                    <p class="col-sm-2">Refresh rate:</p>
                    <div class="col-sm-9">
                        <input id="tinfo_sld_rfh" name="tinfo_sld_rfh" type="text" class="hidden" data-provide="slider" data-slider-min="2" data-slider-max="300" data-slider-value="2" data-slider-step="1" data-slider-ticks-snap-bounds="2" data-slider-ticks="[2,15,30,60,120,180,240,300]" data-slider-ticks-labels='["2s","15s","30s","1m","2m","3m","4m","5m"]' data-slider-ticks-positions="[0,14,28,43,57,71,86,100]" data-slider-tooltip="always" />
                    </div>
                </div>

                <br>

                <div id="toolbar">
                </div>
                <table data-toggle="table" data-toolbar="#toolbar" class="table table-striped" data-show-refresh="false" data-show-toggle="false" data-show-columns="true" data-search="false" data-row-style="rowStyle" id="tab_tinfo_data" data-select-item-name="toolbar1" style="font-size: 1em;">
                    <thead>
                        <tr>
                            <th data-field="na" data-align="left" data-sortable="true" data-formatter="labelFormatter">Label</th>
                            <th data-field="va" data-align="left" data-sortable="true" data-formatter="valueFormatter">Value</th>
                            <th data-field="ck" data-align="center" data-visible="false">Checksum</th>
                            <th data-field="fl" data-align="center" data-visible="false">Flags</th>
                        </tr>
                    </thead>
                </table>

                <br>

                <div class="card card-outline-info" id="pan_tinfo_papp_iinst">
                    <div class="card-header card-info clickable" data-toggle="collapse" id="panhead_tinfo_papp_iinst" data-parent="#tab_tinfo" data-target="#col_tinfo_papp_iinst">
                        <strong>Electric Meter</strong>&nbsp;&nbsp;&nbsp;
                        <span id="sp_tinfo_papp_iinst_state" class="badge badge-pill badge-danger">Not Found/Enabled</span>&nbsp;&nbsp;&nbsp; Power <span id="sp_tinfo_papp" class="badge badge-success">0W</span>&nbsp;&nbsp;&nbsp; Energy <span id="sp_tinfo_iinst" class="badge badge-info">0A</span>&nbsp;&nbsp;&nbsp;
                        <span id="sp_tinfo_papp_iinst_ago"></span>
                        <span class="pull-right fa fa-chevron-down"></span>

                    </div>
                    <div class="card-collapse collapse in" id="col_tinfo_papp_iinst">
                        <div class="card-block">
                            <canvas id="tinfo_papp_iinst_chart" width="800" height="180"></canvas>
                        </div>
                        <div class="card-footer card-info text-muted" style="display: none;"></div>
                    </div>
                </div>


            </div>
            <!-- tab pane teleinfo -->

            <!-- tab sensors -->
            <div class="tab-pane fade" id="tab_sensor">
                <br>

                <div class="row">
                    <p class="col-sm-2">Refresh rate:</p>
                    <div class="col-sm-9">
                        <input id="sensors_sld_rfh" name="sensors_sld_rfh" type="text" data-provide="slider" data-slider-min="2" data-slider-max="300" data-slider-value="2" data-slider-step="1" data-slider-ticks-snap-bounds="2" data-slider-ticks="[2,15,30,60,120,180,240,300]" data-slider-ticks-labels='["2s","15s","30s","1m","2m","3m","4m","5m"]' data-slider-ticks-positions="[0,14,28,43,57,71,86,100]" data-slider-tooltip="always" />
                    </div>
                </div>

                <br>

                <div class="row">
                    <p class="col-sm-2">Panel Power:</p>
                    <div class="col-sm-9">
                        <input id="led_panel" name="led_panel" type="text" data-provide="slider" data-slider-min="0" data-slider-max="100" data-slider-value="0" data-slider-step="1" data-slider-ticks-snap-bounds="4" data-slider-ticks="[0, 25, 50, 75, 100]" data-slider-ticks-labels='["Off", "25%", "50%", "75%", "Full"]'>
                    </div>
                </div>

                <br>


                <div class="card card-outline-info" id="pan_mcp3421">
                    <div class="card-header card-info clickable" data-toggle="collapse" id="panhead_mcp3421" data-parent="#tab_sensor" data-target="#col_mcp3421">
                        <strong>Power Consumption (MCP3421)</strong>&nbsp;&nbsp;&nbsp;
                        <span id="sp_mcp3421_state" class="badge badge-pill badge-danger">Not Found/Enabled</span>&nbsp;&nbsp;&nbsp; Power <span id="sp_mcp3421_pwr" class="badge badge-pill badge-success">0W</span>&nbsp;&nbsp;&nbsp;
                        <span id="sp_mcp3421_ago"></span>
                        <span class="pull-right fa fa-chevron-down"></span>
                    </div>
                    <div class="card-collapse collapse in" id="col_mcp3421">
                        <div class="card-block">
                            <canvas id="mcp3421_chart" width="800" height="180"></canvas>
                            <!--<canvas id="mcp3421_gauge"></canvas>-->
                            <div class="card-footer card-info text-muted" style="display: none;"></div>
                        </div>
                    </div>
                </div>

                <br>


                <div class="card card-outline-info" id="pan_si7021">
                    <div class="card-header card-info clickable" data-toggle="collapse" id="panhead_si7021" data-parent="#tab_sensor" data-target="#col_si7021">
                        <strong>Internal Sensor Values (SI7021)</strong>&nbsp;&nbsp;&nbsp;
                        <span id="sp_si7021_state" class="badge badge-pill badge-danger">Not Found/Enabled</span>&nbsp;&nbsp;&nbsp; Temperature <span id="sp_si7021_temp" class="badge badge-pill badge-success">0CÂ°</span>&nbsp;&nbsp;&nbsp; Humidity <span id="sp_si7021_hum" class="badge badge-pill badge-info">0%</span>&nbsp;&nbsp;&nbsp;
                        <span id="sp_si7021_ago"></span>
                        <span class="pull-right fa fa-chevron-down"></span>
                    </div>
                    <div class="card-collapse collapse in" id="col_si7021">
                        <div class="card-block">
                            <canvas id="si7021_chart" width="800" height="180"></canvas>
                            <div class="card-footer card-info text-muted" style="display: none;"></div>
                        </div>
                    </div>
                </div>


                <br>

                <div class="card card-outline-info" id="pan_sht10">
                    <div class="card-header card-info clickable" data-toggle="collapse" id="panhead_sht10" data-parent="#tab_sensor" data-target="#col_sht10">
                        <strong>External Sensor Values (SHT10)</strong>&nbsp;&nbsp;&nbsp;
                        <span id="sp_sht10_state" class="badge badge-pill badge-danger">Not Found/Enabled</span>&nbsp;&nbsp;&nbsp; Temperature <span id="sp_sht10_temp" class="badge badge-pill badge-success">0CÂ°</span>&nbsp;&nbsp;&nbsp; Humidity <span id="sp_sht10_hum" class="badge badge-pill badge-info">0%</span>&nbsp;&nbsp;&nbsp;
                        <span id="sp_sht10_ago"></span>
                        <span class="pull-right fa fa-chevron-down"></span>
                    </div>
                    <div class="card-collapse collapse in" id="col_sht10">
                        <div class="card-block">
                            <canvas id="sht10_chart" width="800" height="180"></canvas>
                            <div class="card-footer card-info text-muted" style="display: none;"></div>
                        </div>
                    </div>
                </div>


            </div>
            <!-- tab pane sensors -->

            <!-- tab Systeme -->
            <div class="tab-pane fade" id="tab_sys">
                <br>
                <table data-toggle="table" class="table table-striped table-sm table-condensed" data-show-refresh="false" data-show-toggle="false" data-search="false" id="tab_sys_data" data-select-item-name="toolbar2" style="font-size: 1em;">
                    <thead>
                        <tr>
                            <th data-field="na" data-align="left">Name</th>
                            <th data-field="va" data-align="left">Value</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <!-- tab pane systeme-->

            <!-- tab SPIFFS -->
            <div class="tab-pane fade" id="tab_fs">
                <br>
                <div>
                    <span style="float:left;width:18ex;text-align:center;">Usage : </span>
                    <div class="progress">
                        <div class="progress-bar progress-bar-success" style="width:0" id="pfsbar">
                            <span id="fs_use">Calculating...</span>
                        </div>
                    </div>
                </div>

                <br>

                <!-- SPIFFS upload file -->
                <div class="card card-outline-info">
                    <div class="card-header card-info">
                        <strong>SPIFFS Utilities</strong>
                    </div>
                    <div class="card-block">

                        <br>

                        <div class="form-group">

                            <form method='POST' id='frm_fs' action='/upload' enctype='multipart/form-data'>
                                <div class="col-sm-9">
                                    <div class="input-group">
                                        <span class="input-group-btn">
												<span class="btn btn-primary btn-file">Choose a file to upload (or overwritte)&hellip; 
													<input id="file_fs" type="file" name="upload">
												</span>
                                        </span>
                                        <input id="txt_upload_fs" type="text" size="32" class="form-control" placeholder="No file selected" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <input class="btn btn-danger hide" type="button" id="btn_upload_fs" value="">
                                </div>
                            </form>

                            <div id='pgfs' class='hide'>
                                <span id='sfs' style="float:left;width:18ex;text-align:center;"></span>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-success" style="width:0" id="pfs">
                                        <span id="psfs"></span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="card-footer card-outline-info text-muted">
                        <p id="fs_info"></p>
                    </div>
                </div>

                <br>

                <!-- SPIFFS table toolbar -->
                <div id="fs_toolbar">
                </div>

                <div class="card card-outline-default">
                    <div class="card-header card-default">
                        <strong>SPIFFS Filesystem</strong><span class="pull-right" id="spiffs_version"></span>
                    </div>
                    <div class="card-block">
                        <table data-toggle="table" data-toolbar="#fs_toolbar" class="table table-striped table-sm table-condensed" data-show-refresh="false" data-show-columns="false" data-search="false" id="tab_fs_data" data-select-item-name="toolbar4" style="font-size: 1em;">
                            <thead>
                                <tr>
                                    <th data-field="na" data-align="left" data-formatter="fileFormatter">File</th>
                                    <th data-field="va" data-align="center" data-sortable="true">Size (Byte)</th>
                                    <th data-field="ac" data-align="center" data-formatter="deleteButtonMaker">Action</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>

                <br>

                <div class="card card-outline-danger">
                    <div class="card-header card-danger">
                        <strong>Firmware / SPIFFS Update</strong>
                    </div>
                    <div class="card-block">

                        <br>

                        <div class="form-group">

                            <form method='POST' id='frm_fw' action='/update' enctype='multipart/form-data'>
                                <div class="col-sm-9">
                                    <div class="input-group">
                                        <span class="input-group-btn">
												<span class="btn btn-primary btn-file">Choose file&hellip; 
													<input id="file_fw" type="file" name="update"/>
												</span>
                                        </span>
                                        <input id="txt_upload_fw" type="text" size="32" class="form-control" placeholder="No .cpp.bin or .spiffs.bin file selected" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <input class="btn btn-danger hide" type="button" id="btn_upload_fw" value="" />
                                </div>
                            </form>


                            <div id='pgfw' class='hide'>
                                <span id='sfw' style="float:left;width:18ex;text-align:center;"></span>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-success" style="width:0" id="pfw">
                                        <span id="psfw"></span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="card-footer card-outline-danger text-muted">
                        <p id="fw_info"></p>
                    </div>
                </div>
            </div>
            <!-- tab pane SPIFFS-->

            <!-- tab log -->
            <div class="tab-pane fade" id="tab_log">
                <br>
                <table data-toggle="table" class="table table-striped table-sm table-condensed" data-show-refresh="true" data-show-toggle="false" data-search="true" id="tab_log_data" data-select-item-name="toolbar2" data-sort-name="er" data-sort-order="desc">
                    <thead>
                        <tr>
                            <th data-field="er" data-align="center" data-sortable="true">Event</th>
                            <th data-field="ev" data-align="left" data-sortable="false">Mesage</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <!-- tab log-->

            <!-- tab edit -->
            <div class="tab-pane fade" id="tab_edit">
                <br>
                <div class="card card-outline-primary" id="pan_edit">
                    <div class="card-header card-primary">
                        <span class="fa fa-pencil-square-o"></span>&nbsp;SPIFFS File Editor<span id="pan_edit_mM" class="pull-right fa fa-window-maximize clickable"></span>
                    </div>
                    <div class="card" id="col_edit">
                        <div class="card-block">
                            <iframe id="tab_edit_frm" name="tab_edit_frm" src="" style="width:100%; height:100%;"></iframe>
                        </div>
                        <!-- panel body-->
                        <!--
                        <div class="card-footer">
                        </div>-->
                    </div>
                </div>
            </div>
            <!-- tab edit-->

            <!-- tab Configuration -->
            <div class="tab-pane fade" id="tab_cfg">
                <br>
                <div>


                    <!-- Panel Config -->
                    <div class="card card-outline-danger" id="pan_impexp">
                        <div class="card-header card-danger clickable" data-toggle="collapse" data-parent="#pan_impexp" data-target="#col_impexp">
                            <span class="fa fa-file-text-o"></span>&nbsp;Configuration Management<span class="pull-right fa fa-chevron-up"></span>
                        </div>
                        <div class="card-collapse collapse in" id="col_impexp">
                            <div class="card-block">

                                <br>
                                <div class="form-group form-inline">
                                    <strong class="col-sm-3 control-label">Export</strong>
                                    <div class="col-sm-9">
                                        <div class="input-group">
                                            <button class="btn btn-danger" type="button" id="btn_export">Export</button>
                                        </div>
                                        <div class="help-block text-muted">Current configuration will be save to nrjmetter.config</div>
                                    </div>
                                </div>

                                <div class="form-group form-inline">
                                    <strong class="col-sm-3 control-label">Import</strong>
                                    <div class="col-sm-9">
                                        <div class="input-group">
                                            <span class="input-group-btn">
												<span class="btn btn-danger btn-file">Choose file&hellip; 
													<input id="file_cfg" type="file" name="file_cfg"/>
												</span>
                                            </span>
                                            <input id="txt_load_cfg" type="text" size="32" class="form-control" placeholder="No nrjmeter.config file selected" readonly>
                                            <button class="btn btn-danger" type="button" id="btn_import" disabled>Import</button>
                                        </div>
                                        <div class="help-block text-muted">Current configuration will be overwritten with selected nrjmetter.config</div>
                                    </div>
                                </div>

                            </div>
                            <!-- panel body-->
                        </div>
                    </div>
                    <!-- Panel Config -->
                    <br>

                    <form class="form-horizontal row-border" method="post" data-toggle="validator" id="frm_config" action="">

                        <!-- Panel Config gÃ©nÃ©rale -->
                        <div class="card card-outline-primary" id="pan_cfg">
                            <input type="hidden" name="save" value="1">
                            <div class="card-header card-primary clickable" data-toggle="collapse" data-parent="#pan_cfg" data-target="#col_cfg">
                                <span class="fa fa-signal"></span>&nbsp;Wireless Network<span class="pull-right fa fa-chevron-up"></span>
                            </div>
                            <div class="card-collapse collapse show" id="col_cfg">
                                <div class="card-block">

                                    <br>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Enable Wifi</strong>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <input class="checkbox" id="cfg_wifi" name="cfg_wifi" type="checkbox" data-label-text="Wifi" /> &nbsp;Change need Restart
                                            </div>
                                            <div class="help-block text-muted">Wifi will always be enabled for 5 minutes after reset/power on to access configuration.</div>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Wifi SSID</strong>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <input type="text" class="form-control" style="width:100%" id="ssid" name="ssid" maxlength="32" value="" placeholder="Wifi SSID">
                                                <div class="input-group-btn">
                                                    <button class="btn btn-primary dropdown-toggle" type="button" id="btn_scan" data-toggle="modal" data-target="#tab_scan">&nbsp;<span class="fa fa-wifi"></span></button>
                                                </div>
                                            </div>
                                            <span class="help-block text-muted">Connect this device to existing Wifi network.</span>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Wifi key</strong>
                                        <div class="col-sm-9">
                                            <input type="password" class="form-control" style="width:100%" id="psk" name="psk" maxlength="64" data-toggle="password" placeholder="Wifi key (PSK)">
                                            <div class="help-block text-muted" Connect>Existing Wifi network password.</div>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Wifi Connect Timeout</strong>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <input type="number" class="form-control" style="width:100%" id="wmw" name="wmw" step="5" min="5" max="60" placeholder="Timeout">
                                                <span class="input-group-addon">s</span>
                                            </div>
                                            <div class="help-block text-muted" Connect>After timeout, access point mode takes over</div>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Device Name</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width:100%" id="host" name="host" maxlength="32" required placeholder="Device Module network name">
                                            <div class="help-block text-muted">Network hostname of this device.</div>

                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Access Point</strong>
                                        <div class="col-sm-9">
                                            <input class="checkbox" id="cfg_ap" name="cfg_ap" type="checkbox" data-label-text="AP" /> &nbsp;Change need Restart
                                            <div class="help-block text-muted">When enabled you'll be able to direct connect to this device with Wifi. Note that Access point will always be enabled for 5 minutes after reset/power on to access configuration.</div>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Access Point SSID</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width:100%" id="apssid" name="apssid" maxlength="32" placeholder="Device Access Point SSID" required>
                                            <div class="help-block text-muted">Wireless name that will be shown in your Wifi Network list.</div>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Access Point Key</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width:100%" id="appsk" name="appsk" maxlength="64" data-toggle="password" placeholder="Leave emtpy to have opened unsecure access point">
                                            <div class="help-block text-muted">Password to connect to Device Wifi access point (empty NOT recommended).</div>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Static Wifi</strong>
                                        <div class="col-sm-9">
                                            <input class="checkbox" id="cfg_static" name="cfg_static" type="checkbox" data-label-text="Static"> &nbsp;Change need Restart
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Static IP / Mask</strong>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <input class="form-control" type="text" id="ip" name="ip" pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}">
                                                <span class="input-group-addon">/</span>
                                                <input class="form-control" type="text" id="mask" name="mask" pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}">
                                            </div>
                                            <div class="help-block text-muted">Example: 192.168.1.10 / 255.255.255.0</div>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Static Gateway / DNS</strong>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <input class="form-control" type="text" id="gw" name="gw" pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}">
                                                <span class="input-group-addon">/</span>
                                                <input class="form-control" type="text" id="dns" name="dns" pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}">
                                            </div>
                                            <div class="help-block text-muted">Example: 192.168.1.254 / 192.168.1.1</div>
                                        </div>


                                    </div>
                                </div>
                                <!-- panel body-->
                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-primary">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- panel config -->
                        <br>
                        <!-- Panel MQTT -->
                        <div class="card card-outline-mqtt" id="pan_mqtt">
                            <div class="card-header card-mqtt clickable" data-toggle="collapse" data-parent="#pan_mqtt" data-target="#col_mqtt">
                                <span class="fa fa-podcast"></span>&nbsp;MQTT (MQ Telemetry Transport)<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse in" id="col_mqtt">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">MQTT</strong>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <input class="checkbox-inline" id="cfg_mqtt" name="cfg_mqtt" type="checkbox" data-label-text="MQTT"> &nbsp;Change need Restart
                                            </div>
                                            <div class="help-block text-muted">Once enabled, MQTT broadcast need to be activated topic by topic (eg: Domoticz, ...)</div>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Broker</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="mqtt_host" name="mqtt_host" maxlength="32" placeholder="Broker">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Port</strong>
                                        <div class="col-sm-9">
                                            <input type="number" class="form-control" style="width: 100%" id="mqtt_port" name="mqtt_port" min="1" max="65535" placeholder="Port">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Authentication</strong>
                                        <div class="col-sm-9 input-group">
                                            <input class="form-control" type="text" id="mqtt_user" name="mqtt_user" maxlength="16" placeholder="User">
                                            <span class="input-group-addon">@</span>
                                            <input class="form-control" type="password" id="mqtt_pass" name="mqtt_pass" maxlength="16" placeholder="Password">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">In Topic (Hardcoded)</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="mqtt_in" name="mqtt_in" maxlength="32" placeholder="In Topic" readonly>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Out Topic (Hardcoded)</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="mqtt_out" name="mqtt_out" maxlength="32" placeholder="Out Topic" readonly>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">MQTT Protocol version (Hardcoded)</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="mqtt_ver" name="mqtt_ver" maxlength="32" placeholder="MQTT Protocol version" value="3.1.1" readonly>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">MQTT QoS (Hardcoded)</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="mqtt_qos" name="mqtt_qos" maxlength="32" placeholder="MQTT QoS" value="0 - Almost Once" readonly>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">MQTT Retain (Hardcoded)</strong>
                                        <div class="col-sm-9">
                                            <input class="checkbox-inline" id="mqtt_ret" name="mqtt_ret" type="checkbox" data-label-text="Retain" value="false" readonly>
                                        </div>
                                    </div>

                                </div>

                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-mqtt">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- panel MQTT -->
                        <br>
                        <!-- Panel Tinfo -->
                        <div class="card card-outline-tinfo" id="pan_tinfo">
                            <div class="card-header card-tinfo clickable" data-toggle="collapse" data-parent="#pan_tinfo" data-target="#col_tinfo">
                                <span class="fa fa-flash"></span>&nbsp;Eletric Meter<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse in" id="col_tinfo">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Activated Eletric Smart Meter</strong>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="tinfo_edf" name="tinfo_edf" type="checkbox" data-label-text="EDF (tÃ©lÃ©information)">
                                        </div>
                                        <div class="cold-sm-3">
                                            <input class="checkbox-inline disabled" id="tinfo_dsm" name="tinfo_dsm" type="checkbox" data-label-text="Deutch Smart&nbsp;Meter">
                                        </div>
                                    </div>
                                    <!--
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">RGB Led controls</strong>
                                        <div class="col-sm-9">
                                            <div class="form-group row padtop7">
                                                <div class="col-sm-3">
                                                    <h6 style="float: right">Power (W)</h6>
                                                </div>
                                                <div class="col-sm-1">
                                                    <p class="text-right"><span class="badge pull-right">0W</span></p>
                                                </div>
                                                <div class="col-sm-7">
                                                    <input id="tinfo_pwr_led" name="tinfo_pwr_led" type="text" data-slider-min="0" data-slider-max="10000" data-slider-step="100" data-slider-range="false" data-slider-tooltip="always" />
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge">10KW</span>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="form-group row">
                                                <div class="col-sm-3">
                                                    <h6 style="float: right">Energy (A)</h6>
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge pull-right">0A</span>
                                                </div>
                                                <div class="col-sm-7">
                                                    <input id="tinfo_nrj_led" name="tinfo_nrj_led" type="text" data-slider-min="0" data-slider-max="60" data-slider-step="1" data-slider-range="false" data-slider-tooltip="always" />
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge">60A</span>
                                                </div>
                                            </div>
                                            <br>
													<div class="form-group row">
														<div class="col-sm-3">
															<h6 style="float: right">Brightness (TODO)</h6>
														</div>
														<div class="col-sm-1">
															<span class="badge pull-right">0%</span>
														</div>
														<div class="col-sm-7">
															<input id="cfg_led_bright" name="todo_cfg_led_bright" class="col-sm-6" type="text"
																			data-slider-min="0" 
																			data-slider-max="100" 
																			data-slider-step="1" 
																			data-slider-ticks-snap-bounds="4" 
																			data-slider-ticks="[0, 25, 50, 75, 100]" 
																			data-slider-ticks-labels='["Off", "25%", "50%", "75%", "Full"]'>
														</div>
														<div class="col-sm-1">
															<span class="badge">100%</span>
														</div>
													</div>
													<br>

													<div class="form-group row">
														<div class="col-sm-3">
															<p><h6 style="float: right">Heartbeat Frequency (TODO)</h6></p>
														</div>
														<div class="col-sm-1">
															<span class="badge pull-right">0%</span>
														</div>
														<div class="col-sm-7">
															<input id="cfg_led_hb" name="todo_cfg_led_hb" class="col-sm-6" type="text"
																			data-slider-min="0" 
																			data-slider-max="50" 
  										 								data-slider-ticks="[0,5,10,20,50]" 
																			data-slider-ticks-positions="[0, 25, 50, 75, 100]" 
																			data-slider-ticks-labels='["Off", "0.5s", "1s", "2s", "5s"]'
																			data-slider-tooltip="always"/>
														</div>
														<div class="col-sm-1">
															<span class="badge">100%</span>
														</div>
													</div>													

                                        </div>
                                    </div>-->
                                </div>

                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-tinfo">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- panel tinfo -->
                        <br>
                        <!-- Panel Sensors -->
                        <div class="card card-outline-warning" id="pan_sensors">
                            <div class="card-header card-warning clickable" data-toggle="collapse" data-parent="#pan_sensors" data-target="#col_sensors">
                                <span class="fa fa-tint"></span>&nbsp;Sensors<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse in" id="col_sensors">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Activated sensors</strong>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="sens_si7021" name="sens_si7021" type="checkbox" data-label-text="Internal (SI7021)">
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="sens_sht10" name="sens_sht10" type="checkbox" data-label-text="External (SHT10)">
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="sens_mcp3421" name="sens_mcp3421" type="checkbox" data-label-text="Analog (MCP3421)">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Sensors Reading Frequency</strong>
                                        <div class="col-sm-9">
                                            <select id="sens_freq" name="sens_freq" class="form-control col-sm-2">
														<option value="0">disabled</option>
														<option value="1">every second</option>
														<option value="5">every 5 seconds</option>
														<option value="15">every 15 seconds</option>
														<option value="30">every 30 seconds</option>
														<option value="60">every minute</option>
														<option value="300">every 5 minutes</option>
														<option value="900">every 15 minutes</option>
														<option value="1800">every 30 minutes</option>
														<option value="3600">every hour</option>
														<option value="21600">every 6 hours</option>
														<option value="42300">every 12 hours</option>
														<option value="86400">every day</option>
													</select>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">RGB Led controls</strong>
                                        <div class="col-sm-9">
                                            <div class="form-group row padtop7">
                                                <div class="col-sm-3">
                                                    <h6 style="float: right">Temperature Â°C</h6>
                                                </div>
                                                <div class="col-sm-1">
                                                    <p class="text-right"><span class="badge pull-right">-20Â°C</span></p>
                                                </div>
                                                <div class="col-sm-7">
                                                    <input id="sens_temp_led" name="sens_temp_led" type="text" data-slider-min="-20" data-slider-max="85" data-slider-step="1" data-slider-range="true" data-slider-tooltip="always" />
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge">+85Â°C</span>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="form-group row">
                                                <div class="col-sm-3">
                                                    <h6 style="float: right">Relative Humidity (%RH)</h6>
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge pull-right">0%</span>
                                                </div>
                                                <div class="col-sm-7">
                                                    <input id="sens_hum_led" name="sens_hum_led" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-range="true" data-slider-tooltip="always" />
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge">100%</span>
                                                </div>
                                            </div>
                                            <br>

                                            <div class="form-group row">
                                                <div class="col-sm-3">
                                                    <h6 style="float: right">Power Consumption (W)</h6>
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge pull-right">0W</span>
                                                </div>
                                                <div class="col-sm-7">
                                                    <input id="sens_pwr_led" name="sens_pwr_led" type="text" data-slider-min="0" data-slider-max="500" data-slider-step="1" data-slider-range="true" data-slider-tooltip="always" />
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge">500W</span>
                                                </div>
                                            </div>
                                            <br>

                                            <div class="form-group row">
                                                <div class="col-sm-3">
                                                    <h6 style="float: right">Brightness</h6>
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge pull-right">0%</span>
                                                </div>
                                                <div class="col-sm-7">
                                                    <input id="cfg_led_bright" name="cfg_led_bright" class="col-sm-6" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-ticks-snap-bounds="4" data-slider-ticks="[0, 25, 50, 75, 100]" data-slider-ticks-labels='["Off", "25%", "50%", "75%", "Full"]'>
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge">100%</span>
                                                </div>
                                            </div>
                                            <br>

                                            <div class="form-group row">
                                                <div class="col-sm-3">
                                                    <h6 style="float: right">Heartbeat Frequency</h6>
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge pull-right">0%</span>
                                                </div>
                                                <div class="col-sm-7">
                                                    <input id="cfg_led_hb" name="cfg_led_hb" class="col-sm-6" type="text" data-slider-min="0" data-slider-max="50" data-slider-ticks="[0,5,10,20,50]" data-slider-ticks-positions="[0, 25, 50, 75, 100]" data-slider-ticks-labels='["Off", "0.5s", "1s", "2s", "5s"]' data-slider-tooltip="always" />
                                                </div>
                                                <div class="col-sm-1">
                                                    <span class="badge">100%</span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <br>

                                </div>

                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-warning">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- panel sensors -->
                        <br>
                        <!-- Panel Emoncms -->
                        <div class="card card-outline-success" id="pan_emon">
                            <div class="card-header card-success clickable" data-toggle="collapse" data-parent="#pan_emon" data-target="#col_emon">
                                <span class="fa fa-cloud-upload pull-left"></span>&nbsp;Cloud Data Recording<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse out" id="col_emon">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Port</strong>
                                        <div class="col-sm-9">
                                            <select id="emon_port" name="emon_port" class="form-control col-sm-2">
														<option value="80">http (80)</option>
														<option value="443">https (443)</option>
													</select>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Host</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="emon_host" name="emon_host" maxlength="32" placeholder="Server">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">URL</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="emon_url" name="emon_url" maxlength="32" placeholder="Url">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">API Key</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="emon_apikey" name="emon_apikey" maxlength="32" placeholder="API Key">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Node ID</strong>
                                        <div class="col-sm-9">
                                            <input type="number" class="form-control" style="width: 100%" id="emon_node" name="emon_node" size="3" min="0" max="254" placeholder="Node ID">
                                            <span class="help-block text-muted">0 mean no node ID used.</span>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">MQTT Out Topic</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="emon_topic" name="emon_topic" maxlength="32" placeholder="MQTT Out Topic">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Update interval</strong>
                                        <div class="col-sm-9">
                                            <select id="emon_freq" name="emon_freq" class="form-control col-sm-2">
														<option value="0">Disabled</option>
														<option value="15">Every 15 seconds</option>
														<option value="30">Every 30 seconds</option>
														<option value="60">Every minute</option>
														<option value="300">Every 5 minutes</option>
														<option value="900">Every 15 minutes</option>
														<option value="1800">Every 30 minutes</option>
														<option value="3600">Every hour</option>
														<option value="21600">Every 6 hours</option>
														<option value="42300">Every 12 hours</option>
														<option value="86400">Every day</option>
													</select>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Broadcast Mode</strong>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="emon_http" name="emon_http" type="checkbox" data-label-text="HTTP">
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="emon_mqtt" name="emon_mqtt" type="checkbox" data-label-text="MQTT">
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-success">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- panel emoncms -->
                        <br>
                        <!-- Panel Jeedom -->
                        <div class="card card-outline-success" id="pan_jdom">
                            <div class="card-header card-success clickable" data-toggle="collapse" data-parent="#pan_jdom" data-target="#col_jdom">
                                <span class="fa fa-home"></span>&nbsp;Jeedom<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse out" id="col_jdom">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Port</strong>
                                        <div class="col-sm-9">
                                            <select id="jdom_port" name="jdom_port" class="form-control col-sm-2">
														<option value="80">http (80)</option>
														<option value="8080">http (8080)</option>
														<option value="443">https (443)</option>
													</select>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Host</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="jdom_host" name="jdom_host" maxlength="32" placeholder="Server">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">URL</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="jdom_url" name="jdom_url" maxlength="64" placeholder="Url">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">API Key</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="jdom_apikey" name="jdom_apikey" maxlength="32" placeholder="API Key">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">MQTT Out Topic</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="jdom_topic" name="jdom_topic" maxlength="32" placeholder="MQTT Out Topic">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Update interval</strong>
                                        <div class="col-sm-9">
                                            <select id="jdom_freq" name="jdom_freq" class="form-control col-sm-2">
														<option value="0">Disabled</option>
														<option value="15">Every 15 seconds</option>
														<option value="30">Every 30 seconds</option>
														<option value="60">Every minute</option>
														<option value="300">Every 5 minutes</option>
														<option value="900">Every 15 minutes</option>
														<option value="1800">Every 30 minutes</option>
														<option value="3600">Every hour</option>
														<option value="21600">Every 6 hours</option>
														<option value="42300">Every 12 hours</option>
														<option value="86400">Every day</option>
													</select>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Broadcast Mode</strong>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="jdom_http" name="jdom_http" type="checkbox" data-label-text="HTTP">
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="jdom_mqtt" name="jdom_mqtt" type="checkbox" data-label-text="MQTT">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">ADCO Counter ID</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="jdom_adco" name="jdom_adco" maxlength="12" placeholder="ADCO Counter">
                                            <span class="help-block text-muted">Only needed to override your legacy ADCO if needed. Leave blank otherwise.</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-success">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- panel Jeedom -->
                        <br>
                        <!-- Panel domoticz -->
                        <div class="card card-outline-success" id="pan_domz">
                            <div class="card-header card-success clickable" data-toggle="collapse" data-parent="#pan_domz" data-target="#col_domz">
                                <span class="fa fa-link"></span>&nbsp;Domoticz<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse out" id="col_domz">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Port</strong>
                                        <div class="col-sm-9">
                                            <select id="domz_port" name="domz_port" class="form-control col-sm-2">
														<option value="80">http (80)</option>
														<option value="8080">http (8080)</option>
														<option value="443">https (443)</option>
													</select>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Hostname</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="domz_host" name="domz_host" maxlength="32" placeholder="Server Hostname">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">URL</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="domz_url" name="domz_url" maxlength="64" placeholder="Url">
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">MQTT Out Topic</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" style="width: 100%" id="domz_topic" name="domz_topic" maxlength="32" placeholder="MQTT Out Topic">
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Basic Authentication</strong>
                                        <div class="col-sm-9 input-group">
                                            <input class="form-control" type="text" id="domz_user" name="domz_user" maxlength="16" placeholder="User">
                                            <span class="input-group-addon">@</span>
                                            <input class="form-control" type="password" id="domz_pass" name="domz_pass" maxlength="16" placeholder="Password">
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Update interval</strong>
                                        <div class="col-sm-9">
                                            <select id="domz_freq" name="domz_freq" class="form-control col-sm-2">
														<option value="0">Disabled</option>
														<option value="15">Every 15 seconds</option>
														<option value="30">Every 30 seconds</option>
														<option value="60">Every minute</option>
														<option value="300">Every 5 minutes</option>
														<option value="900">Every 15 minutes</option>
														<option value="1800">Every 30 minutes</option>
														<option value="3600">Every hour</option>
														<option value="21600">Every 6 hours</option>
														<option value="42300">Every 12 hours</option>
														<option value="86400">Every day</option>
													</select>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Broadcast Mode</strong>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="domz_http" name="domz_http" type="checkbox" data-label-text="HTTP">
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="checkbox-inline" id="domz_mqtt" name="domz_mqtt" type="checkbox" data-label-text="MQTT">
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">ESP Metrics</strong>
                                        <div class="col-sm-9">
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_upt" name="domz_idx_upt" maxlength="3" placeholder="Uptime">
                                            <span class="help-block text-muted">Domoticz IDX for "General - Custom Sensor (Uptime)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_rst" name="domz_idx_rst" maxlength="3" placeholder="Reset Cause ID">
                                            <span class="help-block text-muted">Domoticz IDX for "Light Switch - Switch" device update (Reset Cause ID)</span>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Sensors Devices</strong>
                                        <div class="col-sm-9">
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_mcp3421" name="domz_idx_mcp3421" maxlength="3" placeholder="Electric">
                                            <span class="help-block text-muted">Domoticz IDX for "Usage - Electric" device update (MCP3421)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_si7021" name="domz_idx_si7021" maxlength="3" placeholder="Temperature & Humidity">
                                            <span class="help-block text-muted">Domoticz IDX for "Temp + Humidity" device update (SI7021)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_sht10" name="domz_idx_sht10" maxlength="3" placeholder="Temperature & Humidity">
                                            <span class="help-block text-muted">Domoticz IDX for "Temp + Humidity" device update (SHT10)</span>
                                        </div>
                                    </div>
                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Electric Meter Devices</strong>
                                        <div class="col-sm-9">
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_txt" name="domz_idx_txt" maxlength="3" placeholder="ADCO">
                                            <span class="help-block text-muted">DomoticZ IDX for "General - Text" device update (ADCO)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_p1sm" name="domz_idx_p1sm" maxlength="3" placeholder="P1 Smart Meter">
                                            <span class="help-block text-muted">Domoticz IDX for "P1 Smart Meter - Energy" device update (BASE,0,0,0,PAPP,0)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_crt" name="domz_idx_crt" maxlength="3" placeholder="Current">
                                            <span class="help-block text-muted">Domoticz IDX for "General - Current" device update (IINST)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_elec" name="domz_idx_elec" maxlength="3" placeholder="Electric">
                                            <span class="help-block text-muted">Domoticz IDX for "Usage - Electric" device update (PAPP)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_kwh" name="domz_idx_kwh" maxlength="3" placeholder="Kwh">
                                            <span class="help-block text-muted">Domoticz IDX for "General (Calculated) - kWh" device update (PAPP,0)</span>
                                            <input type="number" class="form-control" style="width: 100%" id="domz_idx_pct" name="domz_idx_pct" maxlength="3" placeholder="Percentage">
                                            <span class="help-block text-muted">Domoticz IDX for "General - Percentage" device update (IINST/ISOUSC * 100)</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-success">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- panel domoticz -->
                        <br>
                        <!-- Panel counter -->
                        <div class="card panel-outline-warning" id="pan_cnt">
                            <div class="card-header card-warning clickable" data-toggle="collapse" data-parent="#pan_cnt" data-target="#col_cnt">
                                <span class="fa fa-sort"></span>&nbsp;Pulse Counter<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse out" id="col_cnt">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Counter #1</strong>
                                        <div class="col-sm-9 form-inline">

                                            <h6>IO Pin</h6>&nbsp;
                                            <select id="cnt_io_1" name="cnt_io_1" class="form-control">
														<option value="0">Disabled</option>
														<option value="2">GPIO2</option>
														<option value="12">GPIO12</option>
														<option value="13">GPIO13</option>
														<option value="14">GPIO14</option>
														<option value="15">GPIO15</option>
													</select>&nbsp;&nbsp;
                                            <h6>Debounce Delay</h6>&nbsp;
                                            <div class="input-group">
                                                <input class="form-control" type="text" id="cnt_dly_1" name="cnt_dly_1" size="5" min="0" max="65535" maxlength="5" />
                                                <div class="input-group-addon">ms</div>
                                            </div>&nbsp;&nbsp;
                                            <h6>Current Value</h6>&nbsp;
                                            <input class="form-control" type="text" id="cnt_val_1" name="cnt_val_1" size="10" min="0" max="11165534" />&nbsp;&nbsp;
                                            <button type="button" class="btn btn-default btn-warning" id="btn_cnt1">Set value</button>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Counter #2</strong>
                                        <div class="col-sm-9 form-inline">

                                            <h6>IO Pin</h6>&nbsp;
                                            <select id="cnt_io_2" name="cnt_io_2" class="form-control">
														<option value="0">Disabled</option>
														<option value="2">GPIO2</option>
														<option value="12">GPIO12</option>
														<option value="13">GPIO13</option>
														<option value="14">GPIO14</option>
														<option value="15">GPIO15</option>
													</select>&nbsp;&nbsp;
                                            <h6>Debounce Delay</h6>&nbsp;
                                            <div class="input-group">
                                                <input class="form-control" type="text" id="cnt_dly_2" name="cnt_dly_2" size="5" min="0" max="65535" maxlength="5" />
                                                <div class="input-group-addon">ms</div>
                                            </div>&nbsp;&nbsp;
                                            <h6>Current Value</h6>&nbsp;
                                            <input class="form-control" type="text" id="cnt_val_2" name="cnt_val_2" size="10" min="0" max="11165534" />&nbsp;&nbsp;
                                            <button type="button" class="btn btn-default btn-warning" id="btn_cnt2">Set value</button>
                                        </div>
                                    </div>


                                </div>
                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-warning">Enregistrer</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- panel counter -->
                        <br>
                        <!-- Advanced -->
                        <div class="card card-outline-danger" id="pan_advanced">
                            <div class="card-header card-danger clickable" data-toggle="collapse" data-parent="#pan_advanced" data-target="#col_advanced">
                                <span class="fa fa-cog"></span>&nbsp;Advanced<span class="pull-right fa fa-chevron-down"></span>
                            </div>
                            <div class="card-collapse collapse out" id="col_advanced">
                                <div class="card-block">

                                    <br>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Activated features</strong>
                                        <div class="col-sm-9">
                                            <input class="checkbox-inline" id="cfg_debug" name="cfg_debug" type="checkbox" data-label-text="Serial Debug"> &nbsp;&nbsp;
                                            <input class="checkbox-inline" id="cfg_logger" name="cfg_logger" type="checkbox" data-label-text="Filelogger Debug"> &nbsp;&nbsp;
                                            <input class="checkbox-inline" id="cfg_demo" name="cfg_demo" type="checkbox" data-label-text="Demo<br>Mode"> &nbsp;&nbsp;
                                            <br><br>
                                            <input class="checkbox-inline" id="cfg_rgb" name="cfg_rgb" type="checkbox" data-label-text="RGB Led"> &nbsp;&nbsp;
                                            <input class="checkbox-inline" id="cfg_oled" name="cfg_oled" type="checkbox" data-label-text="Display<br>&nbsp;"> &nbsp;&nbsp;
                                            <br><br>
                                            <input class="checkbox-inline" id="cfg_tinfo" name="cfg_tinfo" type="checkbox" data-disabled="true" data-label-text="Electric<br>Meter"> &nbsp;&nbsp;

                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">HTTP Authentication<br>(SPIFFS Editor)</strong>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="http_usr" name="http_usr" placeholder="HTTP user"> &nbsp;&nbsp;
                                            <input type="password" class="form-control" id="http_pwd" name="http_pwd" placeholder="HTTP password">
                                            <span class="help-block text-muted">Leave empty to disable HTTTP authentication.</span>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">OTA Password</strong>
                                        <div class="col-sm-9">
                                            <input type="password" class="form-control" id="ota_auth" name="ota_auth" placeholder="OTA password">
                                            <span class="help-block text-muted">Leave empty to disable OTA authentication for updates.</span>
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">OTA TCP Port</strong>
                                        <div class="col-sm-9">
                                            <input type="number" class="form-control" id="ota_port" name="ota_port" size="5" min="1024" max="65534" placeholder="OTA TCP Port">
                                        </div>
                                    </div>

                                    <div class="form-group form-inline">
                                        <strong class="col-sm-3 control-label">Led configuration</strong>
                                        <div class="col-sm-9 form-inline">

                                            <h6>Type</h6>&nbsp;
                                            <select id="cfg_led_type" name="cfg_led_type" class="form-control">
														<option value="0">None</option>
														<option value="1">RGB</option>
														<option value="2">GRB</option>
														<option value="3">RGBW</option>
														<option value="4">GRBW</option>
													</select>&nbsp;&nbsp;
                                            <h6>IO Pin</h6>&nbsp;
                                            <select id="cfg_led_gpio" name="cfg_led_gpio" class="form-control">
														<option value="255">Disabled</option>
														<option value="0">GPIO0</option>
														<option value="1">GPIO1</option>
														<option value="2">GPIO2</option>
														<option value="3">GPIO3</option>
														<option value="4">GPIO4</option>
														<option value="5">GPIO5</option>
														<option value="12">GPIO12</option>
														<option value="13">GPIO13</option>
														<option value="14">GPIO14</option>
														<option value="15">GPIO15</option>
														<option value="16">GPIO16</option>
													</select>&nbsp;&nbsp;
                                            <h6># of LED</h6>
                                            <input class="form-control" type="number" id="cfg_led_num" name="cfg_led_num" size="3" min="1" max="128" maxlength="3" />
                                        </div>
                                    </div>

                                </div>

                                <div class="card-footer">
                                    <div class="text-center">
                                        <div class="btn-group">
                                            <button class="btn btn-danger" type="button" id="btn_reboot">Restart Device</button>
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-danger" type="button" data-toggle="modal" data-target="#confirm-rst">Config Reset</button>
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-danger" type="button" data-toggle="modal" data-target="#confirm-raz">Factory Reset</button>
                                        </div>
                                        <div class="btn-group">
                                            <button type="submit" class="btn btn-default btn-success">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- advanced -->
                    </form>
                    <!-- config form -->
                </div>
            </div>
            <!-- tab config-->


            <!-- tab terminal -->
            <div class="tab-pane fade" id="tab_term">
                <br>
                <div id="term" class="jumbotron container-fluid" style="padding:10px; height:85vh;">
                </div>
            </div>
            <!-- tab pane terminal -->

        </div>
        <!-- tab content-->
        <!--<button type="button" class="btn btn-danger" id="btn_test">test</button>-->
    </div>
    <!-- Container -->

    <!-- Modal Confirm RST -->
    <div class="modal fade" id="confirm-rst" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Please confirm config Reset</h4>
                </div>
                <div class="modal-body">
                    <p>You are going to reset config to default, you'll need to setup back all option after this action and you'll maybe loosing this current Wifi access.</p>
                    <p>All SPIFFS file system will remain intact.</p>
                    <p>Are you really sure that is what you want to do?</p>
                    <p class="debug-url"></p>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" id="btn_rst">Yes please, reset config</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Confirm RST-->

    <!-- Modal Confirm RAZ -->
    <div class="modal fade" id="confirm-raz" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Please confirm factory Reset</h4>
                </div>
                <div class="modal-body">
                    <p>You are going to put your device settings to Factory, you'll need to setup back all option after this action and you'll be loosing this current Wifi access.</p>
                    <p>All SPIFFS file system will be empty and you'll need to set it back to have device working again.</p>
                    <p>Are you really sure that is what you want to do?</p>
                    <p class="debug-url"></p>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" id="btn_raz">Yes please, erase all</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Confirm RAZ-->

    <!-- Modal Wifi Scan -->
    <div class="modal fade" id="tab_scan" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
                    <h4 class="modal-title">Available Wifi networks</h4>
                </div>
                <div class="modal-body">
                    <table id="tab_scan_data" class="table" data-toggle="table" data-cache="false" data-sort-name="rssi" data-sort-order="desc" data-show-refresh="true" data-show-loading="true" style="font-size: 1em;">
                        <thead>
                            <tr>
                                <th class="col-sm-5" data-field="ssid" data-sortable="true" data-formatter="SSIDFormatter">SSID</th>
                                <th class="col-sm-4" data-field="signal" data-align="center" data-formatter="RSSIFormatter">Signal</th>
                                <th class="col-sm-2" data-field="rssi" data-sortable="true" data-sort-order="asc" data-align="center">RSSI</th>
                                <th class="col-sm-1" data-field="chan" data-align="center">Chan</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="modal-footer">
                    <span class="pull-left">Click to row line to select the Wifi you want to connect to</span>
                    <button type="button" class="btn btn-error" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal Wifi Scan -->

    <!-- Modal Confirm Delete -->
    <div class="modal fade" id="confirm-del" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Confirmez la Suppression</h4>
                </div>
                <div class="modal-body">
                    <p>You are going to delete file <span id="file2delete"></span>, this action cannot be undone.</p>
                    <p>If this file is required by the system, you may have to re-flash the firmware to get it back.</p>
                    <p>Are you sure to delete this file?</p>
                    <p class="debug-url"></p>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Nop, cancel that!</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" id="btn_delete" file2delete="">Yep, sure!</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Confirm Delete-->

    <!-- Modal Reconnect -->
    <div class="modal fade" id="mdl_wait" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header ">
                    <h4 class="modal-title">Trying to reconnect to Module</h4>
                </div>
                <div class="modal-body">
                    <p class="text-center" id="txt_srv"></p>
                    <p class="text-center">
                        <span class="fa fa-refresh fa-refresh-animate" style="font-size: 3.5em;">
							</span>
                    </p>
                    <p class="text-center" id="txt_elapsed"></p>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Reboot -->

    <!-- Scripts devant Ãªtre chargÃ©s en fin de page -->
    <!-- Librairies -->
    <!--
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/jquery.terminal-1.7.2.min.js"></script>
    <script src="js/jquery.formautofill.min.js"></script>
    <script src="js/tether.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-toggle.min.js"></script>
    <script src="js/bootstrap-slider.min.js"></script>
    <script src="js/bootstrap-switch.min.js"></script>
    <script src="js/validator.min.js"></script>
    <script src="js/reconnecting-websocket.min.js"></script>
    <script src="js/Chart.bundle.min.js"></script>
    <script src="js/notify.min.js"></script>
    -->
    <script src="js/libraries.min.js"></script>
    <!-- Main script de cette page -->
    <script src="main.js"></script>
    <div id="loader-wrapper">
        <div id="loader"></div>
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>
</body>

</html>
